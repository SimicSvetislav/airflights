<div class="container" style="margin-top: 50px">
  <div class="col-md-12">
    <div class="input-group mb-3">
      <input
        type="text"
        class="form-control"
        placeholder="Search users"
        aria-label="Recipient's username"
        [(ngModel)]="searchKeyword"
        aria-describedby="basic-addon2"
      />
      <div class="input-group-append">
        <button
          class="btn btn-info"
          type="button"
          (click)="search(searchKeyword)"
        >
          Search <i class="fa fa-user"></i>
        </button>
      </div>
    </div>
    <div *ngIf="otherUsers.length > 0">
      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let friend of otherUsers; let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ friend.firstName }}</td>
            <td>{{ friend.lastName }}</td>
            <td style="width:115px">
              <button
                *ngIf="friend.friendStatus == 'NONE'"
                class="btn btn-outline-info"
                (click)="addFriend(friend.id)"
              >
                Add friend
              </button>
              <button
                *ngIf="friend.friendStatus == 'FRIEND'"
                class="btn btn-outline-danger"
                (click)="removeFriend(friend.id)"
              >
                Remove friend
              </button>
              <button
                *ngIf="friend.friendStatus == 'REQUESTED'"
                class="btn btn-outline-success"
                (click)="acceptFriend(friend.id)"
              >
                Accept
              </button>

              <button
                *ngIf="friend.friendStatus == 'REQUESTEDs'"
                class="btn btn-outline-danger"
                (click)="refuseFriend(friend.id)"
              >
                Refuse
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <ngb-pagination
        [(collectionSize)]="collectionSize"
        [(page)]="pageNo"
        [(pageSize)]="pageSize"
        [boundaryLinks]="true"
        style="float:right"
        (pageChange)="onPageChange(pageNo)"
      ></ngb-pagination>
    </div>
    <hr style="margin-top:70px" />
    <div *ngIf="friends.length > 0" class="container" style="margin-top: 50px">
      <div class="col-md-12"></div>
      <h5>Friends:</h5>
      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let friend of friends; let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ friend.firstName }}</td>
            <td>{{ friend.lastName }}</td>
            <td style="width:145px">
              <button
                class="btn btn-outline-danger"
                (click)="removeFriend(friend.id)"
              >
                Remove friend
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <ngb-pagination
        [(collectionSize)]="collectionSize2"
        [(page)]="pageNo2"
        [(pageSize)]="pageSize2"
        [boundaryLinks]="true"
        style="float:right"
        (pageChange)="onPageChange2(pageNo2)"
      ></ngb-pagination>
    </div>
  </div>
  <div
    *ngIf="acceptFriends.length > 0"
    class="container"
    style="margin-top: 50px"
  >
    <div class="col-md-12"></div>
    <h5>Accept/Reject Friendships:</h5>
    <table class="table table-bordered table-sm">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">First Name</th>
          <th scope="col">Last Name</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let friend of acceptFriends; let i = index">
          <th scope="row">{{ i + 1 }}</th>
          <td>{{ friend.firstName }}</td>
          <td>{{ friend.lastName }}</td>
          <td style="width:100px">
            <button
              class="btn btn-outline-success"
              (click)="acceptFriend(friend.id)"
            >
              Accept
            </button>
          </td>
          <td style="width:100px">
            <button
              class="btn btn-outline-danger"
              (click)="refuseFriend(friend.id)"
            >
              Refuse
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <ngb-pagination
      [(collectionSize)]="collectionSize4"
      [(page)]="pageNo4"
      [(pageSize)]="pageSize4"
      [boundaryLinks]="true"
      style="float:right"
      (pageChange)="onPageChange4(pageNo4)"
    ></ngb-pagination>
  </div>
  <div
    *ngIf="pendingFriends.length > 0"
    class="container"
    style="margin-top: 50px"
  >
    <div class="col-md-12"></div>
    <h5>Pending Friend Requests:</h5>
    <table class="table table-bordered table-sm">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">First Name</th>
          <th scope="col">Last Name</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let friend of pendingFriends; let i = index">
          <th scope="row">{{ i + 1 }}</th>
          <td>{{ friend.firstName }}</td>
          <td>{{ friend.lastName }}</td>
        </tr>
      </tbody>
    </table>
    <ngb-pagination
      [(collectionSize)]="collectionSize3"
      [(page)]="pageNo3"
      [(pageSize)]="pageSize3"
      [boundaryLinks]="true"
      (pageChange)="onPageChange3(pageNo3)"
      style="float:right"
    ></ngb-pagination>
  </div>
</div>
